# 2019HuaWeiCodeCraft

武长赛区：闲云野鹤队，华中科技大学机械学院

队员：郑豪杰，邹华平，徐长斌

初赛分数3739,24名;复赛分数3246,武长赛区第3，决赛季军（8进4碰见冠军（咕咕咕），是在下输了）

## 算法思想

* 根据地图最多能够容纳的车辆数即sum(roads[i].length * roads[i].channel)乘以一个系数作为地图不死锁情况下能够容纳车辆的最大数量范围的初始估算值range
* 每一时刻按照range减去地图上现有的车辆数来控制下一时刻的全图发车量need_car
* 车辆按照预置车辆、非预置优先车辆、非预置普通车辆分为三个车库，一旦车辆的planTime等于sys_time即可以发车，就把车辆放入车库中
* 发车时，预置车辆由于不能更改时间，到时间必须出生，优先发非预置优先车辆，其次非预置普通车辆
* 每次车辆出生从车库中选取2 * need_car数量的车，根据拥堵情况规划路径，从中选取need_car数量的相比更不拥堵的车辆出生
* 车辆行驶过程中会间隔一定距离进行一次路径规划
* 不解死锁，通过不断变步长改变全图车的容纳量，迭代出更优解
* 路径规格采用广度优先搜索，60000辆车规划2.5s可完成
 

## 判题器

决赛判题器运行时间20s左右(加了实时规划，所以比较慢)

## 需求更改

* 复赛：只能改10%预置车辆的路径，我们选择固定更改最短路径和现有路径相差比较大的10%更改，复赛现场一直出bug，最后十分钟改好，没敢用
* 决赛：康康老师提前在群里说过给一些人绝地翻盘的机会，提前压了一波赛题，猜中了更改时间，提前想好了策略：改预置车辆中时间靠后的优先车辆的时间为planTime,最后40分钟开始改代码，只剩余5分钟改完bug,惊心动魄！！！上传调度时间减少了50左右，没有时间调参了，最后32进16成绩2111






